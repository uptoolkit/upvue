var G=Object.defineProperty;var D=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var L=(o,a,l)=>a in o?G(o,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[a]=l,O=(o,a)=>{for(var l in a||(a={}))J.call(a,l)&&L(o,l,a[l]);if(D)for(var l of D(a))Q.call(a,l)&&L(o,l,a[l]);return o};(function(o,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("vue"),require("ant-design-vue"),require("collect.js"),require("@bundled-es-modules/axios")):typeof define=="function"&&define.amd?define(["exports","vue","ant-design-vue","collect.js","@bundled-es-modules/axios"],a):(o=typeof globalThis!="undefined"?globalThis:o||self,a(o.upvue={},o.Vue,o.Antd,o.collect,o.axios))})(this,function(o,a,l,v,d){"use strict";function $(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var A=$(l),F=$(v);class b{__(t,e=null,s=null){return this.get(t,e,s)}add(t,e=null){e||(e=this.locale),this.translations.set(e,Object.assign({},this.translations.get(e),t))}choice(t,e=1,s=null,i=null){i||(i=this.locale);let n=null;const c=this.fetch(`${i}.${t}`);if(!c)return this.options.storeNotFounds&&window[this.options.globalName]._notFounds.push(t),this.forceDisplayKeys?s?this.constructor.replaceString(t,s):t:"";const h=c.split("|");return h.some(z=>(n=this.constructor.matchChoiceCount(z,e),n)),n===!1&&(n=e>1?h[1]:h[0]),this._returnString(t,n,s)}constructor(t={},e="en",s={}){s=Object.assign({globalName:"translations",forceDisplayKeys:!0,storeNotFounds:!0},s),this.forceDisplayKeys=s.forceDisplayKeys,this.locale=e,this.translations=new Map,s.globalName&&(window[s.globalName]===void 0&&(window[s.globalName]={}),t=Object.assign({},window[s.globalName],t),s.storeNotFounds&&(window[s.globalName]._notFounds=[])),this.set(t,this.locale),this.options=s}static decodeHtml(t){const e=document.createElement("textarea");return e.innerHTML=t,e.value}fetch(t){const e=t.split("."),s=e.shift();let i=this.translations.get(s);return e.forEach(n=>{i&&(i=i[n])}),i}get(t,e=null,s=null){typeof e=="string"&&(s=e,e=null),s||(s=this.locale);const i=this.fetch(`${s}.${t}`);return this._returnString(t,i,e)}has(t,e=null){return e||(e=this.locale),this.fetch(`${e}.${t}`)!==void 0}static matchChoiceCount(t,e){const s=t.match(/^[{[]([^[\]{}]*)[}\]](.*)/);if(!s)return!1;if(s[1].includes(",")){const[i,n]=s[1].split(",",2);if(n==="*"&&e>=i||i==="*"&&e<=n||e>=i&&e<=n)return s[2]}return parseInt(s[1],10)===e?s[2]:null}static replaceString(t,e){return e?Object.entries(e).reduce((s,[i,n])=>{n=String(n);const c=i.toLowerCase();return s.replace(`:${c}`,n).replace(`:${c.toUpperCase()}`,n.toUpperCase()).replace(`:${c.charAt(0).toUpperCase()}${c.slice(1)}`,`${n.charAt(0).toUpperCase()}${n.slice(1)}`)},t):t}_returnString(t,e,s){return typeof e!="string"&&this.forceDisplayKeys&&(e=t,this.options.storeNotFounds&&window[this.options.globalName]._notFounds.push(t)),s&&(e=this.constructor.replaceString(e,s)),this.constructor.decodeHtml(e)}setLocale(t){this.locale=t}set(t,e=null){e||(e=this.locale),this.translations.set(e,t)}}function T(r={},t="en",e={}){return new b(r,t,e)}var q={name:"vue-i18n",production:!0,install(r,t={}){t=Object.assign({instance:null,translations:{},language:"en",options:{}},t);let e=t.instance;e||(e=new b({},t.language,t.options)),e.add(t.translations,t.language),typeof r.config!="undefined"&&typeof r.config.globalProperties!="undefined"?(r.config.globalProperties.$i18n=e,r.config.globalProperties.__=e.__,r.config.globalProperties.choice=e.choice):(r.prototype.$i18n=e,r.$i18n=e,r.mixin({methods:{__:e.__,choice:e.choice}}))}},I=(r,t)=>{for(const[e,s]of t)r[e]=s;return r};const K=a.defineComponent({components:[l.ConfigProvider],provide(){return{loading:this.loading,api:this.api,http:this.http,config:this.config,i18n:this.i18n,t:this.i18n.__.bind(this.i18n),choice:this.i18n.choice.bind(this.i18n)}},setup(){const r=a.ref(!1);let{config:t,message:e,notification:s,api:i,http:n,i18n:c}=o.useUp(),h=a.ref(t.get("locale"));return{loading:r,locale:h,api:i,http:n,config:t,message:e,notification:s,i18n:c}}});function M(r,t,e,s,i,n){const c=a.resolveComponent("a-config-provider");return a.openBlock(),a.createBlock(c,null,{default:a.withCtx(()=>[a.renderSlot(r.$slots,"default")]),_:3})}var S=I(K,[["render",M]]);class P{constructor(t={}){this.record(t)}all(){return this.errors}has(t){let e=this.errors.hasOwnProperty(t);return e||(e=Object.keys(this.errors).filter(i=>i.startsWith(`${t}.`)||i.startsWith(`${t}[`)).length>0),e}first(t){return this.get(t)[0]}get(t){return this.errors[t]||[]}any(t=[]){if(t.length===0)return Object.keys(this.errors).length>0;let e={};return t.forEach(s=>e[s]=this.get(s)),e}record(t={}){this.errors=t}clear(t){if(!t){this.errors={};return}let e=Object.assign({},this.errors);Object.keys(e).filter(s=>s===t||s.startsWith(`${t}.`)||s.startsWith(`${t}[`)).forEach(s=>delete e[s]),this.errors=e}}function R(r){return Object.prototype.toString.call(r)==="[object Array]"}function E(r){return r instanceof File||r instanceof FileList}function g(r,t){for(const e in t)r[e]=_(t[e])}function _(r){if(r===null)return null;if(E(r))return r;if(Array.isArray(r)){const t=[];for(const e in r)r.hasOwnProperty(e)&&(t[e]=_(r[e]));return t}if(typeof r=="object"){const t={};for(const e in r)r.hasOwnProperty(e)&&(t[e]=_(r[e]));return t}return r}function U(r,t=new FormData,e=null){if(r===null||r==="undefined"||r.length===0)return t.append(e,r);for(const s in r)r.hasOwnProperty(s)&&H(t,W(e,s),r[s]);return t}function W(r,t){return r?r+"["+t+"]":t}function H(r,t,e){if(e instanceof Date)return r.append(t,e.toISOString());if(e instanceof File)return r.append(t,e,e.name);if(typeof e=="boolean")return r.append(t,e?"1":"0");if(e===null)return r.append(t,"");if(typeof e!="object")return r.append(t,e);U(e,r,t)}const B=["__http","__options","__validateRequestType","clear","data","delete","errors","getError","getErrors","hasError","initial","onFail","only","onSuccess","patch","populate","post","processing","successful","put","reset","submit","withData","withErrors","withOptions"];function N(r){if(B.indexOf(r)!==-1)throw new Error(`Field name ${r} isn't allowed to be used in a Form or Errors instance.`)}class f{constructor(t={},e={}){this.processing=!1,this.successful=!1,this.withData(t).withOptions(e).withErrors({})}withData(t){R(t)&&(t=t.reduce((e,s)=>(e[s]="",e),{})),this.setInitialValues(t),this.errors=new P,this.processing=!1,this.successful=!1;for(const e in t)N(e),this[e]=t[e];return this}withErrors(t){return this.errors=new P(t),this}withOptions(t){this.__options={resetOnSuccess:!0},t.hasOwnProperty("resetOnSuccess")&&(this.__options.resetOnSuccess=t.resetOnSuccess),t.hasOwnProperty("onSuccess")&&(this.onSuccess=t.onSuccess),t.hasOwnProperty("onFail")&&(this.onFail=t.onFail);const e=typeof window=="undefined"?!1:window.axios;if(this.__http=t.http||e||d.axios,!this.__http)throw new Error("No http library provided. Either pass an http option, or install axios.");return this}data(){const t={};for(const e in this.initial)t[e]=this[e];return t}only(t){return t.reduce((e,s)=>(e[s]=this[s],e),{})}reset(){g(this,this.initial),this.errors.clear()}setInitialValues(t){this.initial={},g(this.initial,t)}populate(t){return Object.keys(t).forEach(e=>{N(e),this.hasOwnProperty(e)&&g(this,{[e]:t[e]})}),this}clear(){for(const t in this.initial)this[t]="";this.errors.clear()}post(t){return this.submit("post",t)}put(t){return this.submit("put",t)}patch(t){return this.submit("patch",t)}delete(t){return this.submit("delete",t)}submit(t,e){return this.__validateRequestType(t),this.errors.clear(),this.processing=!0,this.successful=!1,new Promise((s,i)=>{this.__http[t](e,this.hasFiles()?U(this.data()):this.data()).then(n=>{this.processing=!1,this.onSuccess(n.data),s(n.data)}).catch(n=>{this.processing=!1,this.onFail(n),i(n)})})}hasFiles(){for(const t in this.initial)if(this.hasFilesDeep(this[t]))return!0;return!1}hasFilesDeep(t){if(t===null)return!1;if(typeof t=="object"){for(const e in t)if(t.hasOwnProperty(e)&&this.hasFilesDeep(t[e]))return!0}if(Array.isArray(t)){for(const e in t)if(t.hasOwnProperty(e))return this.hasFilesDeep(t[e])}return E(t)}onSuccess(t){this.successful=!0,this.__options.resetOnSuccess&&this.reset()}onFail(t){this.successful=!1,t.response&&t.response.data.errors&&this.errors.record(t.response.data.errors)}hasError(t){return this.errors.has(t)}getError(t){return this.errors.first(t)}getErrors(t){return this.errors.get(t)}__validateRequestType(t){const e=["get","delete","head","post","put","patch"];if(e.indexOf(t)===-1)throw new Error(`\`${t}\` is not a valid request type, must be one of: \`${e.join("`, `")}\`.`)}static create(t={}){return new f().withData(t)}}let y,w,p,u,m,x,C;o.useUp=void 0;const k={install:(r,t)=>{p=F.default(t),r.config.globalProperties.$config=F.default(t),r.config.globalProperties.$http=w=d.axios.create(),r.config.globalProperties.$api=y=d.axios.create({baseURL:t.api.url}),r.config.globalProperties.$message=l.message,r.config.globalProperties.$notification=l.notification,x=function(s,i){return new f(s,O({http:w},i))},C=function(s,i){return new f(s,O({http:y},i))},typeof t.store!="undefined"&&t.storeMode==="vuex"?m=t.store:m=a.reactive({user:null,menus:null});const e=t.translations[t.locale];if(u=T(e,t.locale,{globalName:"translations",forceDisplayKeys:!0,storeNotFounds:!0}),r.use(q,{translations:e,language:t.locale,options:t.i18n}),p.has("exclude.antd")||r.use(A.default),r.provide("UpVue",t),r.component("UpLayout",S),!o.useUp){const s={api:y,http:w,config:p,store:m,form:x,formApi:C,message:l.message,notification:l.notification,i18n:u,__:u.__.bind(u),t:u.__.bind(u),choice:u.choice.bind(u)};p.has("debug")&&console.log("\u2934 useUp() accessible vars",s),o.useUp=()=>s}}};o.UpLayout=S,o.UpVue=k,Object.defineProperty(o,"__esModule",{value:!0}),o[Symbol.toStringTag]="Module"});

var G=Object.defineProperty;var x=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var C=(o,a,l)=>a in o?G(o,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[a]=l,d=(o,a)=>{for(var l in a||(a={}))J.call(a,l)&&C(o,l,a[l]);if(x)for(var l of x(a))Q.call(a,l)&&C(o,l,a[l]);return o};(function(o,a){typeof exports=="object"&&typeof module!="undefined"?a(exports,require("vue"),require("ant-design-vue"),require("collect.js"),require("@bundled-es-modules/axios")):typeof define=="function"&&define.amd?define(["exports","vue","ant-design-vue","collect.js","@bundled-es-modules/axios"],a):(o=typeof globalThis!="undefined"?globalThis:o||self,a(o.upvue={},o.Vue,o.Antd,o.collect,o.axios))})(this,function(o,a,l,D,g){"use strict";function $(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var L=$(l),A=$(D);class F{__(e,t=null,s=null){return this.get(e,t,s)}add(e,t=null){t||(t=this.locale),this.translations.set(t,Object.assign({},this.translations.get(t),e))}choice(e,t=1,s=null,i=null){i||(i=this.locale);let n=null;const u=this.fetch(`${i}.${e}`);if(!u)return this.options.storeNotFounds&&window[this.options.globalName]._notFounds.push(e),this.forceDisplayKeys?s?this.constructor.replaceString(e,s):e:"";const f=u.split("|");return f.some(z=>(n=this.constructor.matchChoiceCount(z,t),n)),n===!1&&(n=t>1?f[1]:f[0]),this._returnString(e,n,s)}constructor(e={},t="en",s={}){s=Object.assign({globalName:"translations",forceDisplayKeys:!0,storeNotFounds:!0},s),this.forceDisplayKeys=s.forceDisplayKeys,this.locale=t,this.translations=new Map,s.globalName&&(window[s.globalName]===void 0&&(window[s.globalName]={}),e=Object.assign({},window[s.globalName],e),s.storeNotFounds&&(window[s.globalName]._notFounds=[])),this.set(e,this.locale),this.options=s}static decodeHtml(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}fetch(e){const t=e.split("."),s=t.shift();let i=this.translations.get(s);return t.forEach(n=>{i&&(i=i[n])}),i}get(e,t=null,s=null){typeof t=="string"&&(s=t,t=null),s||(s=this.locale);const i=this.fetch(`${s}.${e}`);return this._returnString(e,i,t)}has(e,t=null){return t||(t=this.locale),this.fetch(`${t}.${e}`)!==void 0}static matchChoiceCount(e,t){const s=e.match(/^[{[]([^[\]{}]*)[}\]](.*)/);if(!s)return!1;if(s[1].includes(",")){const[i,n]=s[1].split(",",2);if(n==="*"&&t>=i||i==="*"&&t<=n||t>=i&&t<=n)return s[2]}return parseInt(s[1],10)===t?s[2]:null}static replaceString(e,t){return t?Object.entries(t).reduce((s,[i,n])=>{n=String(n);const u=i.toLowerCase();return s.replace(`:${u}`,n).replace(`:${u.toUpperCase()}`,n.toUpperCase()).replace(`:${u.charAt(0).toUpperCase()}${u.slice(1)}`,`${n.charAt(0).toUpperCase()}${n.slice(1)}`)},e):e}_returnString(e,t,s){return typeof t!="string"&&this.forceDisplayKeys&&(t=e,this.options.storeNotFounds&&window[this.options.globalName]._notFounds.push(e)),s&&(t=this.constructor.replaceString(t,s)),this.constructor.decodeHtml(t)}setLocale(e){this.locale=e}set(e,t=null){t||(t=this.locale),this.translations.set(t,e)}}function T(r={},e="en",t={}){return new F(r,e,t)}var q={name:"vue-i18n",production:!0,install(r,e={}){e=Object.assign({instance:null,translations:{},language:"en",options:{}},e);let t=e.instance;t||(t=new F({},e.language,e.options)),t.add(e.translations,e.language),typeof r.config!="undefined"&&typeof r.config.globalProperties!="undefined"?(r.config.globalProperties.$i18n=t,r.config.globalProperties.__=t.__,r.config.globalProperties.choice=t.choice):(r.prototype.$i18n=t,r.$i18n=t,r.mixin({methods:{__:t.__,choice:t.choice}}))}},I=(r,e)=>{for(const[t,s]of e)r[t]=s;return r};const K=a.defineComponent({components:[l.ConfigProvider],provide(){return{loading:this.loading,api:this.api,http:this.http,config:this.config,i18n:this.i18n,t:this.i18n.__.bind(this.i18n),choice:this.i18n.choice.bind(this.i18n)}},setup(){const r=a.ref(!1);let{config:e,message:t,notification:s,api:i,http:n,i18n:u}=o.useUp(),f=a.ref(e.get("locale"));return{loading:r,locale:f,api:i,http:n,config:e,message:t,notification:s,i18n:u}}});function M(r,e,t,s,i,n){const u=a.resolveComponent("a-config-provider");return a.openBlock(),a.createBlock(u,null,{default:a.withCtx(()=>[a.renderSlot(r.$slots,"default")]),_:3})}var b=I(K,[["render",M]]);class S{constructor(e={}){this.record(e)}all(){return this.errors}has(e){let t=this.errors.hasOwnProperty(e);return t||(t=Object.keys(this.errors).filter(i=>i.startsWith(`${e}.`)||i.startsWith(`${e}[`)).length>0),t}first(e){return this.get(e)[0]}get(e){return this.errors[e]||[]}any(e=[]){if(e.length===0)return Object.keys(this.errors).length>0;let t={};return e.forEach(s=>t[s]=this.get(s)),t}record(e={}){this.errors=e}clear(e){if(!e){this.errors={};return}let t=Object.assign({},this.errors);Object.keys(t).filter(s=>s===e||s.startsWith(`${e}.`)||s.startsWith(`${e}[`)).forEach(s=>delete t[s]),this.errors=t}}function R(r){return Object.prototype.toString.call(r)==="[object Array]"}function P(r){return r instanceof File||r instanceof FileList}function _(r,e){for(const t in e)r[t]=y(e[t])}function y(r){if(r===null)return null;if(P(r))return r;if(Array.isArray(r)){const e=[];for(const t in r)r.hasOwnProperty(t)&&(e[t]=y(r[t]));return e}if(typeof r=="object"){const e={};for(const t in r)r.hasOwnProperty(t)&&(e[t]=y(r[t]));return e}return r}function E(r,e=new FormData,t=null){if(r===null||r==="undefined"||r.length===0)return e.append(t,r);for(const s in r)r.hasOwnProperty(s)&&H(e,W(t,s),r[s]);return e}function W(r,e){return r?r+"["+e+"]":e}function H(r,e,t){if(t instanceof Date)return r.append(e,t.toISOString());if(t instanceof File)return r.append(e,t,t.name);if(typeof t=="boolean")return r.append(e,t?"1":"0");if(t===null)return r.append(e,"");if(typeof t!="object")return r.append(e,t);E(t,r,e)}const B=["__http","__options","__validateRequestType","clear","data","delete","errors","getError","getErrors","hasError","initial","onFail","only","onSuccess","patch","populate","post","processing","successful","put","reset","submit","withData","withErrors","withOptions"];function U(r){if(B.indexOf(r)!==-1)throw new Error(`Field name ${r} isn't allowed to be used in a Form or Errors instance.`)}class p{constructor(e={},t={}){this.processing=!1,this.successful=!1,this.withData(e).withOptions(t).withErrors({})}withData(e){R(e)&&(e=e.reduce((t,s)=>(t[s]="",t),{})),this.setInitialValues(e),this.errors=new S,this.processing=!1,this.successful=!1;for(const t in e)U(t),this[t]=e[t];return this}withErrors(e){return this.errors=new S(e),this}withOptions(e){this.__options={resetOnSuccess:!0},e.hasOwnProperty("resetOnSuccess")&&(this.__options.resetOnSuccess=e.resetOnSuccess),e.hasOwnProperty("onSuccess")&&(this.onSuccess=e.onSuccess),e.hasOwnProperty("onFail")&&(this.onFail=e.onFail);const t=typeof window=="undefined"?!1:window.axios;if(this.__http=e.http||t||g.axios,!this.__http)throw new Error("No http library provided. Either pass an http option, or install axios.");return this}data(){const e={};for(const t in this.initial)e[t]=this[t];return e}only(e){return e.reduce((t,s)=>(t[s]=this[s],t),{})}reset(){_(this,this.initial),this.errors.clear()}setInitialValues(e){this.initial={},_(this.initial,e)}populate(e){return Object.keys(e).forEach(t=>{U(t),this.hasOwnProperty(t)&&_(this,{[t]:e[t]})}),this}clear(){for(const e in this.initial)this[e]="";this.errors.clear()}post(e){return this.submit("post",e)}put(e){return this.submit("put",e)}patch(e){return this.submit("patch",e)}delete(e){return this.submit("delete",e)}submit(e,t){return this.__validateRequestType(e),this.errors.clear(),this.processing=!0,this.successful=!1,new Promise((s,i)=>{this.__http[e](t,this.hasFiles()?E(this.data()):this.data()).then(n=>{this.processing=!1,this.onSuccess(n.data),s(n.data)}).catch(n=>{this.processing=!1,this.onFail(n),i(n)})})}hasFiles(){for(const e in this.initial)if(this.hasFilesDeep(this[e]))return!0;return!1}hasFilesDeep(e){if(e===null)return!1;if(typeof e=="object"){for(const t in e)if(e.hasOwnProperty(t)&&this.hasFilesDeep(e[t]))return!0}if(Array.isArray(e)){for(const t in e)if(e.hasOwnProperty(t))return this.hasFilesDeep(e[t])}return P(e)}onSuccess(e){this.successful=!0,this.__options.resetOnSuccess&&this.reset()}onFail(e){this.successful=!1,e.response&&e.response.data.errors&&this.errors.record(e.response.data.errors)}hasError(e){return this.errors.has(e)}getError(e){return this.errors.first(e)}getErrors(e){return this.errors.get(e)}__validateRequestType(e){const t=["get","delete","head","post","put","patch"];if(t.indexOf(e)===-1)throw new Error(`\`${e}\` is not a valid request type, must be one of: \`${t.join("`, `")}\`.`)}static create(e={}){return new p().withData(e)}}let w,m,c,h,O,N,v;o.useUp=void 0;const k={install:(r,e)=>{c=A.default(e);const t=c.get("override")||{};if(r.config.globalProperties.$config=c.get("override.config")||c,r.config.globalProperties.$http=m=c.get("override.http")||g.axios.create(),r.config.globalProperties.$api=w=c.get("override.api")||g.axios.create({baseURL:e.api.url}),r.config.globalProperties.$message=c.get("override.message")||l.message,r.config.globalProperties.$notification=c.get("override.notification")||l.notification,c.has("exclude.form")||(N=function(s,i){return new p(s,d({http:m},i))},v=function(s,i){return new p(s,d({http:w},i))}),typeof e.store!="undefined"&&e.storeMode==="vuex"?O=e.store:O=a.reactive({user:null,menus:null}),!c.has("exclude.i18n")){const s=e.translations[e.locale];h=T(s,e.locale,{globalName:"translations",forceDisplayKeys:!0,storeNotFounds:!0}),r.use(q,{translations:s,language:e.locale,options:e.i18n})}if(c.has("exclude.antd")||r.use(L.default),r.provide("UpVue",e),r.component("UpLayout",b),!o.useUp){const s=d({api:w,http:m,config:c,store:O,form:N,formApi:v,message:l.message,notification:l.notification,i18n:h,__:h.__.bind(h),t:h.__.bind(h),choice:h.choice.bind(h)},t);c.has("debug")&&console.log("\u2934 useUp() accessible vars :",s),o.useUp=()=>s}}};o.UpLayout=b,o.UpVue=k,Object.defineProperty(o,"__esModule",{value:!0}),o[Symbol.toStringTag]="Module"});
